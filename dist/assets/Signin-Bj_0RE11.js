import{u as A,r as m,j as e,L as R}from"./index-BgvmjoPK.js";import{F as d,a as O,b as $,c as q,d as h}from"./index-m96ZVajk.js";import{R as I}from"./index-D6x1koeM.js";import{M}from"./index-Cc-SIf8Y.js";import{L as W,y as n}from"./index-Vs19GYf2.js";/* empty css                      */import{a as Y}from"./index-B9ygI19o.js";import{B as z,s as D,a as J,g as U}from"./login-B3sMSLdu.js";import"./iconBase-BpTAibu1.js";import"./clsx-B-dksMZM.js";import"./index-UswyhjMM.js";function le(){const C=A(),[r,v]=m.useState(""),[s,P]=m.useState({fname:"",lname:"",email:"",password:"",confirmPassword:"",agree:!1}),[l,y]=m.useState({}),[w,T]=m.useState(!1),[j,F]=m.useState(!1),[i,k]=m.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,specialChar:!1}),[f,p]=m.useState(!1),u=t=>{const{name:a,value:o,type:x,checked:c}=t.target;P({...s,[a]:x==="checkbox"?c:o}),l[a]&&y({...l,[a]:""}),a==="password"&&k({length:o.length>=8,uppercase:/[A-Z]/.test(o),lowercase:/[a-z]/.test(o),number:/\d/.test(o),specialChar:/[@$!%*?&]/.test(o)})},S=t=>{v(t),l.role&&y({...l,role:""}),t==="student"?n.success("ðŸŽ“ You selected to Learn as a Student!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}):t==="teacher"&&n.success("ðŸ‘¨â€ðŸ« You selected to Teach as a Teacher!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},L=()=>{let t={};if(r||(t.role="Please select whether you want to Learn or Teach"),s.fname.trim()?s.fname.length<3?t.fname="First name must be at least 3 letters":/^[a-zA-Z]+$/.test(s.fname)||(t.fname="First name should contain only letters"):t.fname="First name is required",s.lname.trim()?/^[a-zA-Z]+$/.test(s.lname)||(t.lname="Last name should contain only letters"):t.lname="Last name is required",s.email?/\S+@\S+\.\S+/.test(s.email)||(t.email="Invalid email address"):t.email="Email is required",!s.password)t.password="Password is required";else{const a=i;a.length?(!a.uppercase||!a.lowercase||!a.number||!a.specialChar)&&(t.password="Password does not meet all requirements"):t.password="Password must be at least 8 characters"}return s.confirmPassword?s.password!==s.confirmPassword&&(t.confirmPassword="Passwords do not match"):t.confirmPassword="Confirm password is required",s.agree||(t.agree="You must accept the terms and conditions"),y(t),Object.keys(t).length===0},E=async t=>{if(t.preventDefault(),!L()){n.error("âŒ Please fix the errors in the form",{position:"top-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});return}p(!0);const a=n.loading("ðŸ”„ Creating your account...",{position:"top-center",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1}),o={fname:s.fname,lname:s.lname,email:s.email,password:s.password,role:r};console.log("ðŸ“¤ Sending to backend:",o);const x=r==="student"?"http://localhost:5000/api/students":"http://localhost:5000/api/teachers";try{const c=await Y.post(x,o);console.log("âœ… Success:",c.data),n.update(a,{render:`ðŸŽ‰ ${r==="student"?"Student":"Teacher"} account created successfully!`,type:"success",isLoading:!1,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),n.success(`âœ… Welcome ${s.fname}! You can now log in.`,{position:"top-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),B(),setTimeout(()=>{C("/login")},2e3)}catch(c){console.error("âŒ Error:",c.response?.data||c.message),n.update(a,{render:`âŒ ${c.response?.data?.error||"Registration failed. Please try again."}`,type:"error",isLoading:!1,autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});let g="Registration failed";c.response?.data?.error?.includes("already registered")?g="Email already registered. Please log in or use a different email.":c.response?.status===500&&(g="Server error. Please try again later."),n.error(`âŒ ${g}`,{position:"top-center",autoClose:4e3})}finally{p(!1)}},G=async()=>{if(!r){n.error("âš ï¸ Please select whether you want to Learn or Teach first",{position:"top-center",autoClose:4e3});return}p(!0);const t=n.loading("ðŸ” Connecting to Google...",{position:"top-center",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1});try{console.log("ðŸ” Starting Google authentication for:",r);const o=(await D(J,U)).user,x=await o.getIdToken(!0);console.log("âœ… Google sign-in successful:",o.email),n.update(t,{render:"âœ… Google authentication successful! Creating your account...",type:"info",isLoading:!0,autoClose:!1});const g=await fetch(r==="student"?"http://localhost:5000/api/auth/google/student":"http://localhost:5000/api/auth/google/teacher",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({role:r==="student"?"student":"teacher"})}),N=await g.json();if(!g.ok)throw new Error(N.error||"Failed to save Google user");console.log("âœ… Received from backend:",N),n.update(t,{render:`ðŸŽ‰ ${r==="student"?"Student":"Teacher"} account created successfully with Google!`,type:"success",isLoading:!1,autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),n.success(`ðŸ‘‹ Welcome ${o.displayName||o.email}!`,{position:"top-center",autoClose:3e3}),localStorage.setItem("user",JSON.stringify(N.user)),setTimeout(()=>{C(r==="student"?"/student":"/teacher")},1500)}catch(a){console.error("âŒ Google authentication failed:",a),n.update(t,{render:"âŒ Google authentication failed",type:"error",isLoading:!1,autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});let o=a.message||"Google authentication failed";a.code==="auth/popup-closed-by-user"?o="Google sign-in was cancelled":a.code==="auth/network-request-failed"?o="Network error. Please check your connection":a.code==="auth/popup-blocked"?o="Popup was blocked by browser. Please allow popups for this site":a.message.includes("already registered")&&(o="Email already registered. Please log in instead."),n.error(`âŒ ${o}`,{position:"top-center",autoClose:4e3})}finally{p(!1)}},B=()=>{P({fname:"",lname:"",email:"",password:"",confirmPassword:"",agree:!1}),v(""),k({length:!1,uppercase:!1,lowercase:!1,number:!1,specialChar:!1})},b=(t=>{if(!t)return{strength:0,text:"",color:"",textColor:""};const a=i;let o=0;return a.length&&o++,a.lowercase&&o++,a.uppercase&&o++,a.number&&o++,a.specialChar&&o++,{0:{strength:0,text:"Very Weak",color:"bg-red-500",textColor:"text-red-500"},1:{strength:1,text:"Weak",color:"bg-red-400",textColor:"text-red-400"},2:{strength:2,text:"Fair",color:"bg-orange-500",textColor:"text-orange-500"},3:{strength:3,text:"Good",color:"bg-yellow-500",textColor:"text-yellow-500"},4:{strength:4,text:"Strong",color:"bg-green-500",textColor:"text-green-500"},5:{strength:5,text:"Very Strong",color:"bg-green-600",textColor:"text-green-600"}}[o]||{strength:0,text:"",color:"",textColor:""}})(s.password),H=()=>e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:`flex items-center ${i.length?"text-green-600":"text-red-500"}`,children:[i.length?e.jsx(d,{className:"mr-2"}):e.jsx(h,{className:"mr-2"}),"At least 8 characters"]}),e.jsxs("div",{className:`flex items-center ${i.uppercase?"text-green-600":"text-red-500"}`,children:[i.uppercase?e.jsx(d,{className:"mr-2"}):e.jsx(h,{className:"mr-2"}),"One uppercase letter (A-Z)"]}),e.jsxs("div",{className:`flex items-center ${i.lowercase?"text-green-600":"text-red-500"}`,children:[i.lowercase?e.jsx(d,{className:"mr-2"}):e.jsx(h,{className:"mr-2"}),"One lowercase letter (a-z)"]}),e.jsxs("div",{className:`flex items-center ${i.number?"text-green-600":"text-red-500"}`,children:[i.number?e.jsx(d,{className:"mr-2"}):e.jsx(h,{className:"mr-2"}),"One number (0-9)"]}),e.jsxs("div",{className:`flex items-center ${i.specialChar?"text-green-600":"text-red-500"}`,children:[i.specialChar?e.jsx(d,{className:"mr-2"}):e.jsx(h,{className:"mr-2"}),"One special character (@$!%*?&)"]})]})]});return e.jsxs("div",{className:"min-h-screen flex items-center p-4 justify-center bg-gray-50",children:[e.jsx(W,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-8 w-full max-w-md border border-gray-100",children:[e.jsx(z,{}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/2921/2921222.png",alt:"EduPlatform",className:"w-10 mx-auto mb-2"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"EduPlatform"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Join thousands of learners and instructors"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-3",children:"I want to: *"}),e.jsxs("div",{className:"f-choose gap-3 flex justify-center",children:[e.jsxs("div",{className:`f-learn f-c-box flex flex-col justify-center p-4 border-2 rounded-sm cursor-pointer transition-all flex-1 text-center ${r==="student"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-gray-400 bg-white"} ${l.role?"border-red-500":""}`,onClick:()=>S("student"),children:[e.jsxs("p",{className:"flex justify-center items-center gap-2 font-medium",children:[e.jsx(I,{className:"w-5 h-5"})," Learn"]}),e.jsx("small",{className:"text-gray-600 mt-1",children:"Take courses and earn certification"})]}),e.jsxs("div",{className:`f-teach f-c-box flex flex-col justify-center p-4 border-2 rounded-sm cursor-pointer transition-all flex-1 text-center ${r==="teacher"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-gray-400 bg-white"} ${l.role?"border-red-500":""}`,onClick:()=>S("teacher"),children:[e.jsxs("p",{className:"flex justify-center items-center gap-2 font-medium",children:[e.jsx(M,{className:"w-5 h-5"})," Teacher"]}),e.jsx("small",{className:"text-gray-600 mt-1",children:"Create and share your knowledge"})]})]}),l.role&&e.jsx("p",{className:"text-red-500 text-xs mt-2 text-center",children:l.role}),r&&!l.role&&e.jsxs("p",{className:"text-green-500 text-xs mt-2 text-center flex items-center justify-center",children:[e.jsx(d,{className:"mr-1"}),"Selected: ",r==="student"?"Student":"Teacher"]})]}),e.jsxs("form",{onSubmit:E,className:`space-y-4 transition-all duration-300 ${r?"opacity-100":"opacity-50 pointer-events-none"}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center border-b pb-2",children:r==="student"?"Student Sign Up":r==="teacher"?"Teacher Sign Up":"Select Your Role"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"First Name *"}),e.jsx("input",{type:"text",name:"fname",value:s.fname,onChange:u,placeholder:"John",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors ${l.fname?"border-red-500":"border-gray-300"}`,disabled:!r}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.fname}),s.fname&&!l.fname&&s.fname.length>=3&&e.jsxs("p",{className:"text-green-500 text-xs mt-1 flex items-center",children:[e.jsx(d,{className:"mr-1"})," Valid first name"]})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lname",value:s.lname,onChange:u,placeholder:"Doe",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors ${l.lname?"border-red-500":"border-gray-300"}`,disabled:!r}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.lname})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:u,style:{textTransform:"lowercase"},placeholder:"john.doe@example.com",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors ${l.email?"border-red-500":"border-gray-300"}`,disabled:!r}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.email}),s.email&&!l.email&&e.jsxs("p",{className:"text-green-500 text-xs mt-1 flex items-center",children:[e.jsx(d,{className:"mr-1"})," Valid email format"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Password *"}),e.jsx("input",{type:w?"text":"password",name:"password",value:s.password,onChange:u,placeholder:"Create a strong password",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors ${l.password?"border-red-500":"border-gray-300"}`,disabled:!r}),e.jsx("button",{type:"button",onClick:()=>T(!w),className:"absolute right-3 top-10 text-gray-500 hover:text-gray-700 transition-colors",disabled:!r,children:w?e.jsx(O,{}):e.jsx($,{})}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.password}),s.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Password Strength:"}),e.jsx("span",{className:`font-medium ${b.textColor}`,children:b.text})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${b.color}`,style:{width:`${b.strength/5*100}%`}})}),e.jsx(H,{})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Confirm Password *"}),e.jsx("input",{type:j?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:u,placeholder:"Confirm your password",className:`w-full mt-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors ${l.confirmPassword?"border-red-500":"border-gray-300"}`,disabled:!r}),e.jsx("button",{type:"button",onClick:()=>F(!j),className:"absolute right-3 top-10 text-gray-500 hover:text-gray-700 transition-colors",disabled:!r,children:j?e.jsx(O,{}):e.jsx($,{})}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.confirmPassword}),s.confirmPassword&&s.password===s.confirmPassword&&!l.confirmPassword&&e.jsxs("p",{className:"text-green-500 text-xs mt-1 flex items-center",children:[e.jsx(d,{className:"mr-1"})," âœ… Passwords match"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"agree",checked:s.agree,onChange:u,className:`mt-1 transition-colors ${l.agree?"border-red-500 ring-1 ring-red-500":""}`,disabled:!r}),e.jsxs("p",{className:"text-sm text-gray-600",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),e.jsx("p",{className:"text-red-500 text-xs",children:l.agree}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-all duration-300 disabled:bg-blue-300 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center",disabled:Object.keys(l).some(t=>l[t])||!r||f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Account..."]}):r?`Create ${r==="student"?"Student":"Teacher"} Account`:"Select Your Role First"}),e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("hr",{className:"flex-grow border-gray-300"}),e.jsx("span",{className:"px-3 text-gray-400 text-sm",children:"OR CONTINUE WITH"}),e.jsx("hr",{className:"flex-grow border-gray-300"})]}),e.jsx("button",{type:"button",className:"w-full border border-gray-300 py-3 rounded-lg flex items-center justify-center gap-3 hover:bg-gray-50 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",onClick:G,disabled:!r||f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"text-red-500 text-lg"}),e.jsx("span",{children:"Continue with Google"})]})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",e.jsx(R,{to:"/login",className:"text-blue-600 hover:underline font-medium",children:"Log in"})]})]})]})}export{le as default};
