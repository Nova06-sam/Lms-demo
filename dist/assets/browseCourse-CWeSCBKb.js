import{u as O,r as n,j as e}from"./index-BAzVzJec.js";import{c as P}from"./index-C1xXbwkz.js";import{c as M,d as I}from"./index-HLd47iGM.js";import{I as U}from"./index-oVQI5ptU.js";import{v as $,B as z}from"./index-D9b6Bac8.js";import{a as H}from"./index-B9ygI19o.js";import{B as R}from"./BackDashboard-IguRWa86.js";import{L as _,y as o}from"./index-D7sA9hZu.js";/* empty css                      */import"./iconBase-CAFTq8Rg.js";import"./index-DaWSInqW.js";import"./clsx-B-dksMZM.js";function te(){const E=O(),[u,j]=n.useState([]),[a,x]=n.useState(""),[i,m]=n.useState("all"),[h,N]=n.useState("newest"),[T,y]=n.useState(!0),[A,v]=n.useState(!1),[r,w]=n.useState(null),[c,g]=n.useState({email:"",name:""}),[p,C]=n.useState(!1),F=async()=>{y(!0);try{const s=await H.get("http://localhost:5000/api/courses/all/courses");console.log("Courses data:",s.data),j(s.data),o.success("Courses loaded successfully!",{position:"top-right",autoClose:2e3})}catch(s){console.error("Error loading courses:",s),o.error("Failed to load courses",{position:"top-right",autoClose:3e3})}finally{y(!1)}};n.useEffect(()=>{F()},[]);const f=n.useMemo(()=>{let s=[...u];if(a){const t=a.toLowerCase();s=s.filter(l=>l.courseTitle?.toLowerCase().includes(t)||l.description?.toLowerCase().includes(t)||l.tags?.some(d=>d.toLowerCase().includes(t))||l.category?.toLowerCase().includes(t))}switch(i!=="all"&&(s=s.filter(t=>t.status===i)),h){case"newest":s.sort((t,l)=>new Date(l.createdAt)-new Date(t.createdAt));break;case"oldest":s.sort((t,l)=>new Date(t.createdAt)-new Date(l.createdAt));break;case"title-asc":s.sort((t,l)=>(t.courseTitle||"").localeCompare(l.courseTitle||""));break;case"title-desc":s.sort((t,l)=>(l.courseTitle||"").localeCompare(t.courseTitle||""));break;case"students-desc":s.sort((t,l)=>(l.students||0)-(t.students||0));break;case"rating-desc":s.sort((t,l)=>(l.rating||0)-(t.rating||0));break}return s},[u,a,i,h]),L=s=>{E(`/student/mycourses/videoplayer/${s}`)},D=s=>{w(s),g({email:"",name:""}),v(!0)},b=()=>{v(!1),w(null),g({email:"",name:""})},S=s=>{const{name:t,value:l}=s.target;g(d=>({...d,[t]:l}))},B=async()=>{if(r){if(!c.email.trim()){o.error("Email is required",{position:"top-center",autoClose:3e3});return}if(!/\S+@\S+\.\S+/.test(c.email)){o.error("Please enter a valid email address",{position:"top-center",autoClose:3e3});return}if(!c.name.trim()){o.error("Name is required",{position:"top-center",autoClose:3e3});return}C(!0);try{await new Promise(t=>setTimeout(t,1500)),o.success(e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"ðŸŽ‰ Enrollment Successful!"}),e.jsxs("p",{children:[c.name,' has been enrolled in "',r.courseTitle,'"']}),e.jsxs("p",{className:"text-sm mt-1",children:["Confirmation email sent to ",c.email]})]}),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});const s=u.map(t=>t._id===r._id?{...t,students:(t.students||0)+1}:t);j(s),b()}catch(s){console.error("Enrollment error:",s),o.error(e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"âŒ Enrollment Failed"}),e.jsx("p",{children:"Failed to enroll student. Please try again."})]}),{position:"top-center",autoClose:4e3})}finally{C(!1)}}},k=()=>{x(""),m("all"),N("newest"),o.info("All filters cleared",{position:"top-right",autoClose:1500})};return e.jsxs("div",{className:"p-10 bg-gray-50 min-h-full pb-20 relative",children:[e.jsx(_,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}),A&&r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Enroll Student"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Add a student to: ",e.jsx("span",{className:"font-medium",children:r.courseTitle})]})]}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"Ã—"})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:r.courseTitle,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:r.courseTitle}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="published"?"bg-green-100 text-green-800":r.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:r.status?.charAt(0).toUpperCase()+r.status?.slice(1)}),e.jsxs("span",{className:"text-xs text-gray-600",children:[r.students||0," students enrolled"]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Name *"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:S,placeholder:"Enter student's full name",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:S,placeholder:"student@example.com",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," The student will receive an email confirmation with access instructions."]})})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:p,children:"Cancel"}),e.jsx("button",{onClick:B,disabled:p,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Enrolling..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{}),"Enroll Student"]})})]})]})}),e.jsx(R,{}),e.jsx("div",{className:"flex justify-between items-center p-5",children:e.jsx("h1",{className:"text-4xl font-semibold",children:"Browse Courses"})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search courses by title, description, tags...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:a,onChange:s=>x(s.target.value)})]}),e.jsx("div",{children:e.jsxs("select",{value:i,onChange:s=>m(s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:s=>N(s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"title-asc",children:"Title (A-Z)"}),e.jsx("option",{value:"title-desc",children:"Title (Z-A)"}),e.jsx("option",{value:"students-desc",children:"Most Students"}),e.jsx("option",{value:"rating-desc",children:"Highest Rating"})]})})]}),(a||i!=="all")&&e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),a&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm",children:['Search: "',a,'"',e.jsx("button",{onClick:()=>x(""),className:"ml-1 hover:text-blue-600",children:"Ã—"})]}),i!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm capitalize",children:["Status: ",i,e.jsx("button",{onClick:()=>m("all"),className:"ml-1 hover:text-green-600",children:"Ã—"})]}),e.jsx("button",{onClick:k,className:"ml-auto text-sm text-red-600 hover:text-red-800 font-medium",children:"Clear all filters"})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",f.length," of ",u.length," courses"]})]}),T?e.jsxs("div",{className:"flex justify-center items-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading courses..."})]}):e.jsx(e.Fragment,{children:f.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl shadow-sm",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-2",children:a?"No courses found":"No courses available"}),e.jsx("p",{className:"text-gray-500 mb-6",children:a?`No courses match "${a}". Try a different search term.`:"You haven't created any courses yet. Start by creating your first course!"}),a&&e.jsx("button",{onClick:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Search"})]}):f.map((s,t)=>e.jsx("div",{className:"p-5 mb-5",children:e.jsxs("div",{className:"border-1 border-gray-300 rounded-2xl bg-white p-5 flex justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex gap-5 cursor-pointer flex-1",onClick:()=>L(s._id),children:[e.jsx("div",{className:"h-24 w-32 rounded-xl overflow-hidden flex-shrink-0",children:s.thumbnail?e.jsx("img",{className:"w-full h-full object-cover rounded-xl",src:s.thumbnail,alt:s.courseTitle||"Course image"}):e.jsx("div",{className:"w-full h-full bg-gray-200 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"No Image"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-xl font-semibold",children:s.courseTitle}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="published"?"bg-green-100 text-green-800":s.status==="draft"?"bg-yellow-100 text-yellow-800":s.status==="pending"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status?.charAt(0).toUpperCase()+s.status?.slice(1)})]}),s.description&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-gray-500",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:e.jsx(P,{})}),e.jsx("span",{className:"font-medium",children:s.students||0})," students"]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:e.jsx(M,{})}),e.jsx("span",{className:"font-medium",children:s.rating||"No"})," rating"]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:e.jsx(U,{})}),s.category||"Uncategorized"]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:e.jsx(I,{})}),new Date(s.createdAt).toLocaleDateString()]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.tags.slice(0,3).map((l,d)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:l},d)),s.tags.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:["+",s.tags.length-3," more"]})]})]})]}),e.jsx("div",{className:"flex gap-3 text-lg text-gray-600 items-start",children:e.jsx("button",{onClick:l=>{l.stopPropagation(),D(s)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition-colors shadow-sm hover:shadow-md flex items-center gap-2",title:"Enroll Student",children:e.jsx("span",{children:"Enroll"})})})]})},t))})]})}export{te as default};
