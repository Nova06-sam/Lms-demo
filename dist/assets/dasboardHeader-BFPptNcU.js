import{r as i,u as H,j as e}from"./index-BAzVzJec.js";import{l as J,j as S}from"./index-BoJ_87Vx.js";import{a as I,b as Y}from"./index-DaWSInqW.js";import{e as P}from"./index-UcFw3JkJ.js";import{a as V}from"./index-D9b6Bac8.js";import{y as t}from"./index-D7sA9hZu.js";/* empty css                      */import{c as _}from"./createLucideIcon-CEzydnPd.js";const W=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q=_("user",W);function G({view:g,setShow2:w,Tview:h,setTnav:C,userType:a,anav:f,setAnav:k}){const p=H(),[o,m]=i.useState(0),[b,u]=i.useState(!1),[j,x]=i.useState(!1),[l,A]=i.useState({}),[n,N]=i.useState([{id:1,msg:"Welcome to your dashboard!",time:"Just now",read:!1,type:"welcome"},{id:2,msg:"New lesson available in React course",time:"2 hours ago",read:!1,type:"course"},{id:3,msg:"Your assignment was graded",time:"1 day ago",read:!0,type:"assignment"},{id:4,msg:"Upcoming webinar: Advanced JavaScript",time:"3 days ago",read:!1,type:"webinar"},{id:5,msg:"New message from instructor",time:"1 week ago",read:!0,type:"message"}]);i.useEffect(()=>{const s=JSON.parse(localStorage.getItem("user"));s&&(A(s),console.log("User details loaded:",s))},[]),i.useEffect(()=>{const s=n.filter(r=>!r.read).length;m(s)},[n]);const F=()=>{console.log("Toggle clicked - User type:",a),a==="teacher"&&typeof C=="function"?(C(!h),t.info(h?"ðŸ“± Closing teacher menu":"ðŸ“± Opening teacher menu",{position:"top-right",autoClose:2e3})):a==="student"&&typeof w=="function"?(w(!g),t.info(g?"ðŸ“± Closing student menu":"ðŸ“± Opening student menu",{position:"top-right",autoClose:2e3})):a==="admin"&&typeof k=="function"&&(k(!f),t.info(f?"ðŸ“± Closing admin menu":"ðŸ“± Opening admin menu",{position:"top-right",autoClose:2e3}))},U=(s,r)=>{N(y=>{const c=[...y],d=c.findIndex(v=>v.id===s);return d!==-1&&!c[d].read&&(c[d]={...c[d],read:!0},m(v=>v-1),t.success(`âœ… Marked as read: ${c[d].msg.substring(0,30)}...`,{position:"top-right",autoClose:3e3})),c})},$=()=>{const s=n.filter(r=>!r.read).length;if(s===0){t.info("â„¹ï¸ All notifications are already read",{position:"top-right",autoClose:3e3});return}N(r=>r.map(y=>({...y,read:!0}))),m(0),t.success(`âœ… Marked ${s} notification${s>1?"s":""} as read`,{position:"top-right",autoClose:3e3})},L=()=>{if(n.length===0){t.info("â„¹ï¸ No notifications to clear",{position:"top-right",autoClose:3e3});return}t.info("ðŸ—‘ï¸ Clearing all notifications...",{position:"top-right",autoClose:2e3}),setTimeout(()=>{N([]),m(0),t.success("âœ… All notifications cleared",{position:"top-right",autoClose:3e3}),x(!1)},1500)},D=s=>{switch(s){case"welcome":return"ðŸ‘‹";case"course":return"ðŸ“š";case"assignment":return"ðŸ“";case"webinar":return"ðŸŽ¤";case"message":return"ðŸ’¬";default:return"ðŸ””"}},M=s=>{switch(s){case"welcome":return"bg-blue-100 text-blue-800";case"course":return"bg-green-100 text-green-800";case"assignment":return"bg-yellow-100 text-yellow-800";case"webinar":return"bg-purple-100 text-purple-800";case"message":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},O=()=>{t.info("ðŸ‘‹ Logging out...",{position:"top-center",autoClose:2e3}),setTimeout(()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("studentId"),localStorage.removeItem("teacherId"),localStorage.removeItem("adminId"),localStorage.removeItem("rememberedLogin"),t.success("âœ… Successfully logged out",{position:"top-center",autoClose:3e3}),p("/login")},1500)},R=()=>{t.info("âš™ï¸ Opening settings...",{position:"top-right",autoClose:2e3}),p("/settings")},z=()=>{x(!j),u(!1)},B=()=>{x(!1),u(!b)},E=a==="teacher"?h:a==="admin"?f:g;return e.jsx(e.Fragment,{children:e.jsx("header",{children:e.jsxs("nav",{className:"studHeader w-full flex justify-between items-center p-4 bg-white bg-[#F7F9FB]/90 backdrop-blur supports-[backdrop-filter]:bg-[#F7F9FB]/60",children:[e.jsxs("div",{className:"s-logo",children:[e.jsx("h1",{className:"font-stretch-90% text-2xl",children:"wrench wise LMS"}),e.jsxs("small",{className:"text-gray-500 text-xs capitalize",children:[a," Dashboard"]})]}),e.jsxs("div",{className:"s-search flex justify-center items-center gap-5",children:[e.jsxs("div",{className:"s-bar",children:[e.jsx("input",{type:"search",placeholder:"search courses,webinars....",className:"outline-none"}),e.jsx(J,{className:"s-icon bg-white"})]}),e.jsxs("div",{onClick:()=>{z(),!j&&o>0&&t.info(`ðŸ“¬ You have ${o} unread notification${o>1?"s":""}`,{position:"top-right",autoClose:3e3})},className:"s-note hover:bg-green-600 hover:text-white rounded-lg cursor-pointer flex justify-center items-center transition-all",children:[e.jsx(I,{className:"b-icon"}),o>0&&e.jsx("div",{className:"n-count bg-red-700 flex justify-center",children:e.jsx("small",{className:"text-[10px] font-bold text-white",children:o>9?"9+":o})})]}),e.jsxs("div",{className:`s-not-details py-4 px-5 shadow-md flex flex-col gap-2 bg-white rounded-2xl ${j?"visible":"invisible"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"notifications"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[o," unread"]})]}),e.jsx("hr",{className:"text-gray-300"}),e.jsx("div",{className:"s-not-data max-h-60 overflow-y-auto",children:n.length>0?n.map((s,r)=>e.jsxs("div",{className:`s-data-box flex items-center gap-3 hover:bg-gray-50 rounded-xl cursor-pointer p-3 transition-all ${s.read?"opacity-60":""}`,onClick:()=>U(s.id),children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-lg ${M(s.type)}`,children:D(s.type)}),e.jsxs("div",{className:"s-data-txt flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-medium",children:s.msg}),s.read&&e.jsx(S,{className:"text-green-500 ml-2 flex-shrink-0",size:14})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("small",{className:"text-gray-500 text-xs",children:s.time}),!s.read&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:"New"})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(I,{className:"mx-auto text-3xl text-gray-300 mb-2"}),e.jsx("p",{children:"No notifications"}),e.jsx("p",{className:"text-xs mt-1",children:"You're all caught up!"})]})}),e.jsx("hr",{className:"text-gray-300"}),e.jsxs("div",{className:"flex gap-2",children:[n.length>0&&e.jsxs(e.Fragment,{children:[o>0&&e.jsxs("button",{className:"bg-green-500 hover:bg-green-600 py-2 rounded-xl text-white font-medium text-sm flex-1 transition-colors flex items-center justify-center gap-1",onClick:$,children:[e.jsx(S,{size:14}),"Mark All Read"]}),e.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 py-2 rounded-xl text-white font-medium text-sm flex-1 transition-colors",onClick:L,children:"Clear All"})]}),e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 py-2 rounded-xl text-white font-medium text-sm flex-1 transition-colors",onClick:()=>{x(!1),p("/notification")},children:"View All"})]})]}),e.jsxs("div",{className:"s-details overflow-hidden cursor-pointer",onClick:()=>{B(),b||t.info("ðŸ‘¤ Viewing profile options",{position:"top-right",autoClose:2e3})},children:[l?.photoURL?e.jsx("img",{src:l.photoURL,alt:"profile",className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:" s-avatar bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white font-bold",children:l?.name?.charAt(0)||l?.email?.charAt(0)||"U"}),e.jsxs("div",{className:`s-drop rounded-lg bg-white p-4 ${b?"visible":"invisible"}`,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"font-medium underline",children:l?.name??"Unknown User"}),e.jsx("h5",{style:{textTransform:"lowercase"},className:"text-gray-400 font-light mb-1 truncate max-w-[200px]",children:l?.email||"No email"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:a?.charAt(0).toUpperCase()+a?.slice(1)})})]}),e.jsx("hr",{className:"border-gray-300 mb-3"}),e.jsxs("div",{className:"d-set mt-1 hover:bg-green-600 p-2 rounded-lg mb-1 flex items-center gap-2 cursor-pointer",onClick:s=>{s.stopPropagation(),R(),u(!1)},children:[e.jsx(q,{className:"size-4"}),e.jsx("small",{className:"text-gray-400",children:"profile"})]}),e.jsx("hr",{className:"border-gray-300 mb-2"}),e.jsxs("div",{className:"d-set hover:bg-green-600 mt-1 mb-1 p-2 rounded-lg flex items-center gap-2 cursor-pointer",onClick:s=>{s.stopPropagation(),O(),u(!1)},children:[e.jsx(V,{className:"size-4"}),e.jsx("small",{className:"text-gray-400",children:"Logout"})]})]})]}),e.jsx("div",{className:"m-bar bg-gray-200 p-2 rounded-lg cursor-pointer",onClick:F,children:E?e.jsx(P,{className:"text-2xl"}):e.jsx(Y,{className:"text-2xl"})})]})]})})})}const ae=i.memo(G);export{ae as D};
