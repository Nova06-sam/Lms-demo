import{u as b,r as x,j as e}from"./index-BgvmjoPK.js";import{e as j,f as y,g as N,a as v,b as w}from"./index-m96ZVajk.js";import{L as S,y as a}from"./index-Vs19GYf2.js";/* empty css                      */import{a as k}from"./index-B9ygI19o.js";import"./iconBase-BpTAibu1.js";import"./clsx-B-dksMZM.js";function I(){const p=b(),[t,h]=x.useState({email:"",password:"",remember:!1}),[l,g]=x.useState(!1),[i,c]=x.useState(!1),m=d=>{const{name:r,value:n,type:s,checked:u}=d.target;h({...t,[r]:s==="checkbox"?u:n})},f=async d=>{d.preventDefault();const{email:r,password:n}=t;if(!r||!n){a.error("‚ö†Ô∏è Please fill in all fields");return}try{c(!0);const s=await k.post("http://localhost:5000/api/auth/register/admin",{name:"Super Admin",email:r,password:n,role:"super-admin"});console.log("frontend error in role",s.data);const{token:u,user:o}=s.data;if(!o){console.error("No user returned from backend:",s.data),a.error("‚ùå Login failed: No user data from server");return}if(!["admin","super-admin"].includes(o.role)){a.error("‚ùå Access denied. Only Admins can log in."),console.log("frontend error in role"),c(!1);return}localStorage.setItem("admin_token",u),localStorage.setItem("admin_user",JSON.stringify(o)),a.success(`‚úÖ Welcome ${o.name||"Admin"}!`,{autoClose:1500}),setTimeout(()=>p("/super-admin/dashboard"),1500),console.log("Login successful")}catch(s){console.log(s.response?.data||s.message),a.error(s.response?.data?.error||"Login failed")}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[var(--prime)] p-4",children:[e.jsx(S,{position:"top-right"}),e.jsxs("div",{className:"admin-card",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(j,{className:"text-blue-600 text-4xl"})}),e.jsx("h1",{className:"admin-title",children:"Admin Panel Login"}),e.jsx("p",{className:"admin-subtitle",children:"Sign in to manage your LMS platform"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3.5 text-gray-400"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:m,placeholder:"admin@example.com",className:"admin-input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-3.5 text-gray-400"}),e.jsx("input",{type:l?"text":"password",name:"password",value:t.password,onChange:m,placeholder:"Enter your password",className:"admin-input"}),e.jsx("button",{type:"button",onClick:()=>g(!l),className:"absolute right-3 top-3.5 text-gray-500 hover:text-gray-700",children:l?e.jsx(v,{}):e.jsx(w,{})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"remember",checked:t.remember,onChange:m,className:"accent-blue-600 cursor-pointer"}),e.jsx("span",{children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>a.info("üîê Password reset link coming soon!",{autoClose:3e3}),className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:i,className:`w-full bg-[var(--sec)] hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-all transform ${i?"opacity-70 cursor-not-allowed":"hover:scale-[1.02]"}`,children:i?"Signing In...":"Sign In"})]}),e.jsxs("p",{className:"text-center text-xs text-gray-500 mt-6",children:["¬© ",new Date().getFullYear()," copyright issued by Wynsync"]})]})]})}export{I as default};
