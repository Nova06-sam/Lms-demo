import{r as o,j as e,R as pe}from"./index-BAzVzJec.js";import{D as he,b as fe}from"./index-BoJ_87Vx.js";import{c as be}from"./index-DxkRZUkC.js";import{i as ge}from"./index-D9b6Bac8.js";import{L as je,y as f}from"./index-D7sA9hZu.js";/* empty css                      */import{B as ve}from"./BackDashboard-IguRWa86.js";import{a as v}from"./index-B9ygI19o.js";import{e as Ne}from"./index-DaWSInqW.js";import"./iconBase-CAFTq8Rg.js";import"./clsx-B-dksMZM.js";function ye(){return e.jsxs("div",{className:"flex items-center justify-between gap-4 md:gap-6 w-full",children:[e.jsxs("div",{className:"a-txt",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Assessment Management"}),e.jsx("p",{className:"mt-2 text-slate-500",children:"Create, manage, and grade assessments for your students"})]}),e.jsx("div",{className:"abtn",children:e.jsxs("button",{onClick:()=>{setShowForm(!0),setEditingId(null),setTitle(""),setCourse(""),setAssessmentType("MCQ"),setQuestions([]),toastInfo("Opening form...")},className:"inline-flex items-center gap-2 rounded-full bg-[#2563EB] px-4 py-2.5 text-white text-sm font-semibold hover:bg-green-600 shadow-sm md:px-5 md:py-2.5 transition-colors",children:[e.jsx("span",{className:"text-lg leading-none",children:"ï¼‹"}),e.jsx("span",{className:"hidden sm:inline",children:"Create Assessment"}),e.jsx("span",{className:"sm:hidden",children:"Create"})]})})]})}function we({q:n,onChange:d,onRemove:i}){const c=p=>d(n.id,{...n,...p}),m=(p,x)=>{const h=[...n.options||[]];h[p]=x,c({options:h})},N=()=>{(n.options||[]).length>=4||c({options:[...n.options||[],""]})},w=p=>{const x=(n.options||[]).filter((h,g)=>g!==p);c({options:x})};return e.jsx("div",{className:"rounded-2xl border  border-blue-100 bg-blue-50/40 px-4 py-4 sm:px-5 sm:py-5 pt-15",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-800 text-sm sm:text-base",children:"MCQ Question"}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:["Type your question, add up to ",e.jsx("b",{children:"4"})," options, then specify the answer."]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(j,{label:"Question",children:e.jsx("input",{type:"text",value:n.text,onChange:p=>c({text:p.target.value}),placeholder:"e.g., What does React use to efficiently update the UI?",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"mb-1.5 text-sm font-medium text-slate-700",children:["Options (",(n.options||[]).length,"/4)"]}),e.jsx("div",{className:"space-y-2",children:(n.options||[]).map((p,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:h=>m(x,h.target.value),placeholder:`Option ${x+1}`,className:"flex-1 rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>w(x),className:"shrink-0 rounded-full border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 hover:bg-red-50 hover:border-red-200 hover:text-red-700 transition-colors","aria-label":"Remove option",children:"Remove"})]},`${n.id}-opt-${x}`))}),e.jsx("button",{type:"button",onClick:N,disabled:(n.options||[]).length>=4,className:["mt-2 inline-flex items-center gap-2 rounded-full px-3.5 py-1.5 text-xs sm:text-sm font-semibold shadow-sm transition-colors",(n.options||[]).length>=4?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"].join(" "),children:"ï¼‹ Add Option"})]}),e.jsx(j,{label:"Answer",children:e.jsx("input",{type:"text",value:n.answer||"",onChange:p=>c({answer:p.target.value}),placeholder:"Type the correct answer",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Tip: You can add multiple MCQ questions. The â€œAnswerâ€ can be free text."})]})]}),e.jsx("div",{className:"flex flex-col gap-2 sm:items-end sm:justify-center",children:e.jsx("button",{type:"button",onClick:()=>i(n.id),className:"inline-flex items-center gap-1.5 rounded-full px-3.5 py-1.5 text-xs sm:text-sm font-medium text-slate-500 hover:text-slate-700 transition-colors",children:"Remove Question"})})]})})}function Ce({q:n,onChange:d,onRemove:i,label:u="Question"}){const c=m=>d(n.id,{...n,...m});return e.jsx("div",{className:"rounded-2xl border border-blue-100 bg-blue-50/40 px-4 py-4 sm:px-5 sm:py-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-semibold text-slate-800 text-sm sm:text-base",children:[n.type," Question"]}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:"Click â€œAdd Questionâ€ to add your Questions."}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx(j,{label:u,children:e.jsx("input",{type:"text",value:n.text,onChange:m=>c({text:m.target.value}),placeholder:`Type your ${n.type?.toLowerCase()||"question"} prompt`,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})})})]}),e.jsx("div",{className:"flex flex-col gap-2 sm:items-end sm:justify-center",children:e.jsx("button",{type:"button",onClick:()=>i(n.id),className:"inline-flex items-center gap-1.5 rounded-full px-3.5 py-1.5 text-xs sm:text-sm font-medium text-slate-500 hover:text-slate-700 transition-colors",children:"Remove Question"})})]})})}function Se({assessment:n,onClose:d}){if(o.useEffect(()=>{const c=m=>{m.key==="Escape"&&d()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[d]),!n)return null;const i=n.status==="published"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600",u=n.questions||[];return e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:d,"aria-hidden":!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-3xl rounded-2xl border border-slate-200 bg-white shadow-xl",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800",children:n.title}),e.jsx("p",{className:"text-sm text-slate-500",children:n.subtitle||"â€”"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("span",{className:"inline-flex  items-center rounded-full border border-slate-200 px-2 py-0.5 text-xs font-medium text-slate-600",children:n.type}),e.jsx("span",{className:`px-3 py-0.5 text-xs font-medium rounded-full ${i}`,children:n.status}),e.jsx("span",{className:"text-slate-500",children:"â€¢"}),e.jsxs("span",{className:"text-slate-700",children:[n.qns," questions"]}),e.jsx("span",{className:"text-slate-500",children:"â€¢"}),e.jsx("span",{className:"text-slate-700",children:n.duration}),e.jsx("span",{className:"text-slate-500",children:"â€¢"}),e.jsx("span",{className:"text-slate-700",children:n.score})]})]}),e.jsx("button",{onClick:d,className:"rounded-full border border-slate-200 px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-50",children:"âœ• Close"})]}),e.jsx("div",{className:"p-5 space-y-4  max-h-[70vh] overflow-auto",children:u.length===0?e.jsx("div",{className:"rounded-lg  border border-slate-200 p-4 text-sm text-slate-600",children:"No stored questions for this assessment."}):u.map((c,m)=>e.jsx("div",{className:"rounded-xl border border-slate-200 p-4",children:e.jsx("div",{className:"flex   items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg text-gray-600 font-semibold",children:["Q",m+1,":"]}),e.jsx("h4",{className:" font-semibold text-lg",children:c.text||e.jsx("em",{className:"text-gray-600",children:c.questionText})})]}),n.type==="MCQ"&&e.jsx("div",{className:"mt-3 space-y-2",children:e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Answer:"})," ",e.jsx("span",{className:"text-slate-800",children:c.answer||e.jsx("em",{className:"text-slate-400",children:"â€”"})})]})})]})})},c.id||m))})]})})]})}function Ue(){const[n,d]=o.useState(!1),i=o.useRef(null),[u,c]=o.useState("my"),[m,N]=o.useState(null),[w,p]=o.useState([]),x=["Technical","Problem Solving","Comprehension","Coding","Critical Thinking"],h=s=>{p(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])};o.useEffect(()=>{n&&i.current&&requestAnimationFrame(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})})},[n]);const[g,C]=o.useState([]);o.useEffect(()=>{(async()=>{try{const t=await v.get("http://localhost:5000/api/assessments/all");if(t.data.success){const r=t.data.data.map(a=>({id:a._id,title:a.title,subtitle:a.course||"Unassigned",instructions:a.instructions,courseKey:a.course,type:a.assessmentType,qns:a.questions?.length||0,duration:`${a.durationMinutes||0} mins`,score:`${a.maxScore||0} points`,submissions:0,avg:`${a.maxScore||0} points`,status:a.status,questions:a.questions||[],startDate:a.startDate,endDate:a.endDate}));C(r),console.log(t.data)}}catch(t){console.error("Error fetching assessments:",t)}})()},[]);const[l,y]=o.useState([]),[J,Qe]=o.useState({});l.length,o.useEffect(()=>{(async()=>{try{const t=await v.get("http://localhost:5000/api/submissions/all");if(t.data.success){const r=t.data.data.map(a=>({submissionId:a._id,assessmentId:a.assessmentId,assesmentTitle:a.assesmentTitle||"Unassigned",assesmentCourse:a.assesmentCourse||"Unassigned",studentId:a.studentId,studentName:a.studentName,studentEmail:a.studentEmail,totalQuestions:a.totalQuestions,correctAnswers:a.correctAnswers,percentage:a.percentage,timeTaken:a.timeTaken,assessmentType:a.assessmentType,filePath:a.filePath,startedAt:a.startedAt,submittedAt:a.submittedAt,passed:a.passed,status:a.status,marks:a.marks||0,feedback:a.feedback||"",grade:a.grade||!1}));y(r),console.log("student answer Submit ðŸ˜€:",t.data)}}catch(t){console.error("Error fetching studentSubmition:",t)}})()},[]);const ne=(s,t,r)=>{y(a=>a.map(b=>b.submissionId===s?{...b,[t]:r}:b))};o.useMemo(()=>[{id:"p1",student:"Alice Johnson",avatar:"#",assessmentTitle:"State Management Analysis",type:"Subjective",time:"Nov 3, 2025 â€¢ 2:30 PM"},{id:"p2",student:"Bob Smith",avatar:"#",assessmentTitle:"Build a Todo App",type:"Coding",time:"Nov 3, 2025 â€¢ 1:15 PM"},{id:"p3",student:"Carol Davis",avatar:"#",assessmentTitle:"State Management Analysis",type:"Subjective",time:"Nov 2, 2025 â€¢ 4:45 PM"}],[]).length,(g||[]).reduce((s,t)=>s+(t.submissions?.length||0),0);const[S,V]=o.useState(null),[T,I]=o.useState("MCQ"),[Q,F]=o.useState(""),[D,P]=o.useState(""),[$,R]=o.useState(""),[B,O]=o.useState(30),[G,L]=o.useState(100),[_,U]=o.useState(""),[K,X]=o.useState(""),[ae,le]=o.useState([]);o.useEffect(()=>{(async()=>{try{const t=await v.get("http://localhost:5000/api/courses/teacher/gettitle");if(t.data.success){const r=t.data.data.filter(a=>a);console.log(t.data.data),le(r)}}catch(t){console.error("Error fetching courses:",t)}})()},[]);const[A,k]=o.useState([]),Y=()=>{const s=`q-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;k(T==="MCQ"?t=>[...t,{id:s,type:"MCQ",text:"",options:[],answer:""}]:T==="Subjective"?t=>[...t,{id:s,type:"Subjective",text:""}]:t=>[...t,{id:s,type:"Coding",text:""}])},Z=(s,t)=>{k(r=>r.map(a=>a.id===s?t:a))},q=s=>{k(t=>t.filter(r=>r.id!==s))},re=s=>f.info(s),ee=s=>f.success(s),z=s=>f.error(s),se=s=>f.warn(s),oe=async()=>{if(!Q.trim())return z("Please enter an assessment title.");if(!D)return se("Please select a course.");if(A.length===0)return se("Please add at least one question.");try{const s={title:Q,assessmentType:T,instructions:$,course:D,durationMinutes:B,maxScore:G,startDate:_,endDate:K,skills:w,questions:A.map(({text:r,options:a,answer:b,type:M})=>({questionText:r,options:M==="MCQ"?a:[],answer:M==="MCQ"?b:""})),status:"published"};let t;S?t=await v.put(`http://localhost:5000/api/assessments/${S}`,s):t=await v.post("http://localhost:5000/api/assessments/create",s),t.data.success&&(ee(S?"Assessment updated successfully! âœ…":"Assessment created successfully! ðŸŽ‰"),W())}catch(s){console.error(s),z("Failed to save assessment")}},ie=async()=>{try{const s={title:Q,assessmentType:T,instructions:$,course:D,durationMinutes:B,maxScore:G,startDate:_,endDate:K,skills:w,questions:A.map(({text:r,options:a,answer:b,type:M})=>({questionText:r,options:M==="MCQ"?a:[],answer:M==="MCQ"?b:""})),status:"draft"};let t;S?t=await v.put(`http://localhost:5000/api/assessments/${S}`,s):t=await v.post("http://localhost:5000/api/assessments/create",s),t.data.success&&(ee(S?"Draft updated successfully ðŸ’¾":"Draft saved successfully ðŸ’¾"),W())}catch(s){console.error(s),z("Failed to save draft")}},de=()=>{re("Creation cancelled."),W()},W=()=>{F(""),P(""),R(""),I("MCQ"),O(30),L(100),U(""),X(""),k([]),d(!1),V(null)},ce=s=>N(s),ue=()=>N(null),me=async s=>{if(window.confirm("Are you sure you want to delete this assessment?"))try{(await v.delete(`http://localhost:5000/api/assessments/${s}`)).data.success&&(f.success("Assessment deleted successfully! ðŸ—‘ï¸"),C(r=>r.filter(a=>a.id!==s)))}catch(t){console.error("Delete assessment error:",t),f.error("Failed to delete assessment âŒ")}},xe=async s=>{try{const t=await v.get(`http://localhost:5000/api/assessments/${s.id}`);if(t.data.success&&t.data.data){const r=t.data.data;V(r._id),F(r.title||""),P(r.course||""),R(r.instructions||""),I(r.assessmentType||"MCQ"),O(r.durationMinutes||30),L(r.maxScore||100),U(r.startDate?r.startDate.split("T")[0]:""),X(r.endDate?r.endDate.split("T")[0]:"");const a=(r.questions||[]).map(b=>({id:b._id||`q-${Math.random().toString(36).slice(2,7)}`,type:r.assessmentType,text:b.questionText||"",options:b.options||[],answer:b.answer||""}));k(a),d(!0),console.log(t.data.data),f.info("Editing assessment loaded successfully âœï¸")}else f.error("Failed to load assessment details âŒ")}catch(t){console.error("Error loading assessment:",t),f.error("Error fetching assessment details âŒ")}};return e.jsxs("div",{className:"min-h-screen bg-[#F7F9FB]  text-slate-900",children:[e.jsx(je,{position:"top-center",autoClose:3e3,newestOnTop:!0}),e.jsx(ve,{}),e.jsx("div",{className:"hidden pt-14 md:block flex items-center justify-between max-w-7xl mx-auto px-4 sm:px-6 py-4 border-b border-slate-200",children:e.jsx(ye,{})}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 mt-6 md:mt-8 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[e.jsx(E,{title:"Total Assessments",value:g.length,sub:`${g.filter(s=>s.status==="published").length} published`,icon:"â–¦"}),e.jsx(E,{title:"Pending Grading",value:l.filter(s=>!s.grade).length,sub:"Awaiting review",icon:"ðŸ•’"}),e.jsx(E,{title:"Total Submissions",value:l.length,sub:"All time",icon:"ðŸ‘¥"}),e.jsx(E,{title:"Questions Added",value:A.length,sub:"In current form",icon:"â“"})]}),e.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 mt-6",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar pb-1",children:e.jsxs("div",{className:"inline-flex gap-1 rounded-full bg-slate-100 p-1",children:[e.jsxs(te,{active:u==="my",onClick:()=>c("my"),children:["My Assessments (",g.length,")"]}),e.jsxs(te,{active:u==="pending",onClick:()=>c("pending"),children:["Pending Grading (",l.filter(s=>!s.grade).length,")"]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 mt-4 md:mt-6 space-y-4 md:space-y-5",children:[u==="my"&&g.map(s=>e.jsx(Ae,{...s,onOpen:()=>ce(s),onDelete:()=>me(s.id),onEdit:()=>xe(s)},s.id)),u==="pending"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsx(ke,{studentSubmition:l,handleInputChange:ne})})]}),n&&e.jsx("section",{ref:i,className:"max-w-7xl mx-auto px-4 sm:px-6 mt-8",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"p-4 sm:p-5 md:p-6 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:S?"Edit Assessment":"Create New Assessment"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Fill in the details to create a new assessment"})]}),e.jsxs("div",{className:"p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx(j,{label:"Assessment Title",children:e.jsx("input",{type:"text",value:Q,onChange:s=>F(s.target.value),placeholder:"e.g., React Fundamentals Quiz",className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx(j,{label:"Assessment Type",children:e.jsxs("select",{value:T,onChange:s=>I(s.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"MCQ",children:"MCQ"}),e.jsx("option",{value:"Subjective",children:"Subjective"}),e.jsx("option",{value:"Coding",children:"Coding"})]})}),e.jsx(j,{label:"Instructions",children:e.jsx("textarea",{rows:4,value:$,onChange:s=>R(s.target.value),placeholder:"Enter assessment instructions for students...",className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(j,{label:"Course",children:e.jsxs("select",{value:D,onChange:s=>P(s.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select course"}),ae.map((s,t)=>e.jsx("option",{value:s,children:s},s||t))]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(j,{label:"Duration (minutes)",children:e.jsx("input",{type:"number",value:B,onChange:s=>O(Number(s.target.value||0)),className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx(j,{label:"Max Score",children:e.jsx("input",{type:"number",value:G,onChange:s=>L(Number(s.target.value||0)),className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(j,{label:"Start Date",children:e.jsx("input",{type:"date",value:_,onChange:s=>U(s.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx(j,{label:"End Date",children:e.jsx("input",{type:"date",value:K,onChange:s=>X(s.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-base sm:text-md font-semibold text-gray-600 mb-3",children:"Skills Covered"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(s=>{const t=w.includes(s);return e.jsx("button",{type:"button",onClick:()=>h(s),className:`px-4 py-2 rounded-full text-sm font-medium border transition-all
            ${t?"bg-blue-600 border-blue-600 text-white shadow":"bg-white border-slate-300 text-slate-700 hover:bg-blue-50"}
          `,children:s},s)})})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("button",{type:"button",onClick:Y,className:"inline-flex items-center gap-2 rounded-full bg-green-600 px-4 sm:px-5 py-2.5 text-white font-semibold hover:bg-green-700 shadow-sm transition-colors",children:"ï¼‹ Add Question"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["The question editor appears below. It adapts to the selected"," ",e.jsx("b",{children:"Assessment Type"}),"."]})]}),A.length>0&&e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-800",children:["Questions(",A.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Te,{children:T})})]}),A.map(s=>s.type==="MCQ"?e.jsx(we,{q:s,onChange:Z,onRemove:q},s.id):e.jsx(Ce,{q:s,onChange:Z,onRemove:q,label:"Question"},s.id)),e.jsx("div",{className:"pt-1",children:e.jsx("button",{type:"button",onClick:Y,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 sm:px-5 py-2.5 font-medium text-slate-700 hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-colors",children:"ï¼‹ Add Another Question"})})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[e.jsx("button",{onClick:oe,className:"inline-flex items-center gap-2 rounded-full bg-[#2563EB] px-4 sm:px-5 py-2.5 text-white font-semibold hover:bg-green-600 shadow-sm transition-colors",children:"Save"}),e.jsx("button",{onClick:ie,className:"rounded-full border border-slate-300 px-4 sm:px-5 py-2.5 font-medium text-slate-700 hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-colors",children:"Save as Draft"}),e.jsx("button",{onClick:de,className:"rounded-full px-4 sm:px-5 py-2.5 font-medium text-slate-500 hover:text-green-700 transition-colors",children:"Cancel"})]})]})]})}),m&&e.jsx(Se,{assessment:m,onClose:ue}),e.jsx("div",{className:"h-10"})]})}function E({title:n,value:d,sub:i,icon:u}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 sm:p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"font-semibold text-slate-700",children:n}),e.jsx("span",{className:"text-slate-400","aria-hidden":!0,children:u})]}),e.jsx("div",{className:"mt-3 sm:mt-4 text-xl sm:text-2xl tracking-tight",children:d}),e.jsx("div",{className:"mt-1 text-xs sm:text-sm text-slate-400",children:i})]})}function te({children:n,active:d,onClick:i}){return e.jsx("button",{onClick:i,role:"tab","aria-selected":d,className:["whitespace-nowrap rounded-full px-4 py-2 text-sm font-medium transition-colors","focus-visible:outline focus-visible:outline-2 focus-visible:outline-green-500",d?"bg-white text-slate-900 shadow-sm":"text-slate-700 hover:bg-white/70"].join(" "),children:n})}function Ae({id:n,title:d,subtitle:i,type:u,qns:c,duration:m,score:N,submissions:w,avg:p,status:x,onOpen:h,onDelete:g,onEdit:C}){const l=x==="published"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600";return e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 sm:p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:h,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&h&&h()},children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-blue-50 text-blue-600 text-xl","aria-hidden":!0,children:"âœ“"}),e.jsxs("div",{className:"flex-1  min-w-0",children:[e.jsxs("div",{className:"flex items-cente justify-between gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 truncate",children:d}),e.jsx("span",{className:`px-3 mt-2 py-0.5  text-xs font-medium rounded-full ${l}`,children:x})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:i}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-x-6 gap-y-1  text-sm text-slate-600",children:[e.jsxs("span",{children:["Type: ",e.jsx("b",{children:u})]}),e.jsxs("span",{children:["Questions: ",e.jsx("b",{children:c})]}),e.jsxs("span",{children:["Duration: ",e.jsx("b",{children:m})]}),e.jsxs("span",{children:["Score: ",e.jsx("b",{children:N})]}),e.jsxs("span",{children:["Submissions: ",e.jsx("b",{children:w})]}),e.jsxs("span",{children:["Avg Score: ",e.jsx("b",{children:p})]})]})]}),e.jsxs("div",{className:"flex items-center  gap-2 self-start",children:[x==="draft"&&e.jsx(H,{ariaLabel:"Edit",onClick:y=>{C&&C(y)},children:e.jsx(he,{})}),e.jsx(H,{ariaLabel:"Preview",onClick:h,children:e.jsx(fe,{})}),e.jsx(H,{ariaLabel:"Delete",onClick:g,children:e.jsx(be,{})})]})]})})}function ke({studentSubmition:n=[]}){const[d,i]=o.useState(!1),[u,c]=o.useState(null),[m,N]=o.useState(""),[w,p]=o.useState(""),[x,h]=o.useState(!1),g=async()=>{try{if(!u||!u.submissionId){f.error("Invalid submission");return}if(m===""||m<0||m>100){f.error("Enter valid marks (0-100)");return}h(!0),(await v.put(`http://localhost:5000/api/submissions/grade/${u.submissionId}`,{marks:Number(m)})).data.success&&(f.success("Graded Successfully"),i(!1),N(""),c(null))}catch(l){console.error(l),f.error(l.response?.data?.error||"Server error")}finally{h(!1)}};if(!n.length)return e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No Pending Submissions"})});const C=()=>{const l=["#F87171","#60A5FA","#34D399","#FBBF24","#A78BFA","#F472B6"];return l[Math.floor(Math.random()*l.length)]};return e.jsx("div",{children:n.map((l,y)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 sm:p-5 mb-10 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full flex items-center justify-center text-black text-3xl font-bold",style:{backgroundColor:C()},children:l.studentName?.slice(0,1).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold",children:l.studentName}),e.jsx("h3",{children:l.studentEmail}),e.jsx("h3",{children:l.assesmentTitle}),e.jsx("h3",{children:l.assesmentCourse})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="completed"&&l.marks?e.jsx("span",{className:"text-green-600 font-bold",children:"âœ… Completed"}):e.jsx("span",{className:"text-orange-500 font-bold",children:"â³ Pending"}),e.jsx("button",{onClick:()=>{c(l),i(!0),console.log("Selected SUB =>",l)},className:"rounded-full bg-blue-600 px-3 py-1 text-white text-sm font-semibold",children:"Grade Now"})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-slate-500",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"mr-3",children:l.submittedAt}),e.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-2 py-0.5 text-xs font-medium text-slate-600",children:l.assessmentType||"MCQ"}),e.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-2 py-0.5 text-xs font-medium text-slate-600",children:l.assessmentType==="MCQ"?"MCQ":l.filePath?e.jsxs("a",{href:l.filePath,download:!0,target:"_blank",rel:"noopener noreferrer",className:"flex gap-2 text-blue-600 font-semibold hover:underline",children:[e.jsx("span",{children:e.jsx(Ne,{})})," ",e.jsx("span",{children:"Download Now"})]}):e.jsxs("span",{className:"text-black",children:[l.percentage,"%"]})})]}),l.status==="completed"&&e.jsxs("div",{className:"mt-2 text-green-700 font-semibold",children:["Marks: ",l.marks," / 100 | Grade: ",l.grade]})]})]}),d&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/10 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-sm space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Grade Assessment"}),e.jsx("p",{children:u.studentName}),e.jsx("p",{className:"text-sm",children:u.assesmentTitle}),e.jsx("input",{type:"number",placeholder:"Enter Marks /100",className:"w-full border rounded p-2",value:m,onChange:J=>N(J.target.value)}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-1 border rounded",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:x,className:"px-4 py-1 bg-blue-600 text-white rounded",children:x?"Submitting...":"Submit"})]})]})})]},y))})}function H({children:n,ariaLabel:d,onClick:i}){const u=c=>{c.stopPropagation(),i&&i(c)};return e.jsx("button",{"aria-label":d,onClick:u,className:"h-8 w-8 sm:h-9 sm:w-9 grid place-items-center rounded-full border border-slate-200 hover:bg-green-50 hover:border-green-300 transition-colors",children:e.jsx("span",{"aria-hidden":!0,children:n})})}function j({label:n,children:d}){const i=o.useMemo(()=>Math.random().toString(36).slice(2),[]);return e.jsxs("label",{className:"block",htmlFor:i,children:[e.jsx("div",{className:"mb-1.5 text-sm font-medium text-slate-700",children:n}),pe.cloneElement(d,{id:i})]})}function Te({children:n,variant:d="solid"}){const i=d==="muted"?"border border-slate-200 text-slate-600":"bg-slate-100 text-slate-700";return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i}`,children:n})}function Me({className:n=""}){return e.jsx(ge,{className:n})}export{Ue as default};
