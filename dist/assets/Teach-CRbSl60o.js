import{a as q,r as a,j as e,L as F}from"./index-BAzVzJec.js";import{a as i}from"./index-B9ygI19o.js";import{o as E,p as Z,q as _,r as z}from"./index-BoJ_87Vx.js";import{d as Q}from"./index-UcFw3JkJ.js";import{F as b}from"./index-D9b6Bac8.js";import{C as A}from"./code-CMvLa5Vp.js";import{I}from"./index-C8oNkhjH.js";import{P as ee}from"./index-CP55-O23.js";import{C as te}from"./index-HLd47iGM.js";import{D as se}from"./dasboardHeader-BFPptNcU.js";import{R as ae,B as re,X as ne,T as ce,a as le}from"./BarChart-MiwDyc-Q.js";import"./iconBase-CAFTq8Rg.js";import"./index-DaWSInqW.js";import"./index-D7sA9hZu.js";import"./clsx-B-dksMZM.js";/* empty css                      */import"./createLucideIcon-CEzydnPd.js";import"./index-CAbUZYNH.js";function oe({min:m}){console.log("Teacher Navigation min state:",m);const g=q(),f=[{name:"Dashboard",icon:ee,path:"/teacher"},{name:"My Courses",icon:I,path:"/teacher/mycourse"},{name:"Webinars",icon:te,path:"/teacher/livewebinar"},{name:"Assessments",icon:b,path:"/teacher/assessments"},{name:"Create Course",icon:b,path:"/teacher/createCourse"},{name:"Analytics",icon:b,path:"/teacher/analytics"}],x=()=>f.findIndex(d=>g.pathname.startsWith(d.path)),[j,y]=a.useState(x());return a.useEffect(()=>{y(x())},[g.pathname]),e.jsx("div",{className:`teach-d-nav flex flex-col gap-3 bg-white w-64 p-5 shadow-md transition-all duration-300 ${m?"action":""}`,children:f.map((d,p)=>{const N=d.icon,v=j===p;return e.jsxs(F,{to:d.path,className:`teach-d-box flex items-center space-x-3 p-3 pl-5 rounded-3xl cursor-pointer transition-all duration-300 ${v?"bg-blue-500 text-white shadow-md transform scale-105":"text-gray-700 hover:bg-green-500 hover:text-white hover:shadow-md"}`,children:[e.jsx(N,{className:"text-xl"}),e.jsx("span",{className:"font-medium",children:d.name})]},p)})})}function We(){const[m,g]=a.useState(!1),[f,x]=a.useState(0),[j,y]=a.useState(0),[d,p]=a.useState(0),[N,v]=a.useState(0),[L,Y]=a.useState(0),[ie,$]=a.useState(0),[de,he]=a.useState(0),[k,P]=a.useState(0),[B,R]=a.useState([]),[C,U]=a.useState(0),[G,O]=a.useState([]),[H,J]=a.useState([]),K=[{title:"Total Courses",no:f,sup:`${d} in draft`,icon:I},{title:"Active Courses",no:j,sup:"Currently published",icon:b},{title:"Total Students",no:N,sup:`${C>=0?"+":""}${C}% from last month`,icon:E},{title:"Live Webinars",no:L,sup:`${k} in planning`,icon:Z}];a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/courses/all/courses");Array.isArray(t.data)&&J(t.data)}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/courses/all/courses");Array.isArray(t.data)?x(t.data.length):Array.isArray(t.data.course)&&x(t.data.course.length)}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/courses/all/courses");if(Array.isArray(t.data)){const n=t.data.filter(c=>c.status=="published").length,o=t.data.filter(c=>c.status=="draft").length;y(n),p(o)}}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/webinar/all");Array.isArray(t.data.data)&&O(t.data.data)}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const n=(await i.get("http://localhost:5000/api/webinar/all")).data.data;if(Array.isArray(n)){const o=n.filter(r=>r.status==="schedule").length,c=n.filter(r=>r.status==="in-planning").length,l=n.filter(r=>r.status==="completed").length;Y(o),P(c),$(l)}}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/students");if(Array.isArray(t.data)){const n=t.data.length;v(n)}}catch(t){console.log(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/students"),n=Array.isArray(t.data)?t.data:t.data.data,o=new Date,c=[];for(let l=5;l>=0;l--){const r=new Date(o.getFullYear(),o.getMonth()-l,1);c.push({month:r.toLocaleString("en-US",{month:"short"}),year:r.getFullYear(),students:0})}n.forEach(l=>{try{const r=new Date(l.createdAt?.$date||l.createdAt);if(isNaN(r))return;const w=r.toLocaleString("en-US",{month:"short"}),D=r.getFullYear(),u=c.find(h=>h.year===D&&h.month===w);u&&(u.students+=1)}catch(r){console.log("Error parsing student date",l,r)}}),R(c)}catch(t){console.error(t)}})()},[]),a.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/api/students"),n=Array.isArray(t.data)?t.data:t.data.data,o=new Date,c=o.getMonth(),l=o.getFullYear(),r=new Date(l,c-1,1),w=r.getMonth(),D=r.getFullYear();let u=0,h=0;n.forEach(M=>{const S=new Date(M.createdAt?.$date||M.createdAt);if(isNaN(S))return;const T=S.getMonth(),W=S.getFullYear();W===l&&T===c&&(u+=1),W===D&&T===w&&(h+=1)});const X=h===0?100:(u-h)/h*100;U(Math.round(X))}catch(t){console.error(t)}})()},[]);const V=[{id:1,name:"Alice Johnson",course:"React Development",score:98,image:A},{id:2,name:"Bob Smith",course:"JavaScript Patterns",score:92,image:A},{id:3,name:"Carol Davis",course:"React Development",score:89,image:null}];return e.jsx(e.Fragment,{children:e.jsxs("main",{children:[e.jsx(se,{Tview:m,setTnav:g,userType:"teacher"}),e.jsxs("section",{className:"flex",children:[e.jsx(oe,{min:m}),e.jsxs("div",{className:"teach-main bg-gray-50 p-5 py-5 pt-30",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Welcome back, Dr.!"}),e.jsx("p",{className:"text-gray-500",children:"Here's how your courses and webinars are performing this month."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:K.map((s,t)=>{const n=s.icon;return e.jsx("div",{children:e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"t-box flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:s.title}),e.jsx(n,{className:"text-lg text-gray-500"})]}),e.jsx("h2",{className:"text-2xl font-semibold mt-1",children:s.no}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.sup})]})},t)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Student Growth"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Monthly student enrollment trends"}),e.jsx(ae,{width:"100%",height:250,children:e.jsxs(re,{data:B,children:[e.jsx(ne,{dataKey:"month"}),e.jsx(ce,{}),e.jsx(le,{dataKey:"students",fill:"#2563eb",radius:[6,6,0,0]})]})})]}),e.jsxs("div",{className:"bg-white p-6 px-8 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Top Performing Students"}),V.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:s.id}),s.image?e.jsx(e.Fragment,{children:e.jsx("div",{className:"teach-top-student rounded-full overflow-hidden bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:e.jsx("img",{src:A,alt:s.name})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"teach-top-student rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:s.name.split(" ")[0][0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.course})]})]}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("p",{className:"text-lg",children:[s.score,"%"]}),e.jsxs("p",{children:[" ",s.score,"%"]}),e.jsxs("div",{className:"t-top-cover relative bg-gray-700",children:[e.jsx("p",{className:"w-10 h-1 absolute  rounded-3xl bg-blue-600"}),e.jsx("h1",{className:" bg-sky-600 absolute rounded-3xl",style:{width:`${s.score}`}})]})]})]},s.id))]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Upcoming Live Webinars"}),e.jsx(F,{to:"/teacher/scheduleWebinar",children:e.jsx("button",{className:"bg-blue-600 text-white text-sm px-4 py-1.5 rounded-2xl hover:bg-blue-700 transition",children:"+ Schedule Webinar"})})]}),G.filter(s=>s.status==="schedule").map((s,t)=>{const n=new Date(s.webinarSchedule?.sessions?.[0]?.startDateTime).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"America/New_York"});return e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 p-2",children:e.jsxs("div",{className:"txt cover flex justify-between w-full rounded-2xl px-2 border border-gray-400 hover:bg-gray-200",children:[e.jsxs("div",{className:"p-3 ",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.title}),e.jsxs("div",{className:"flex gap-3 text-sm text-gray-500 mt-1",children:[e.jsxs("div",{className:"w-box flex gap-1 justify-center items-center",children:[e.jsx(_,{}),e.jsx("small",{className:"text-gray-400",children:n.replace(","," at")})]}),e.jsxs("div",{className:"w-box flex gap-1 justify-center items-center",children:[e.jsx(z,{}),e.jsx("small",{className:"text-gray-400",children:s.duration})]}),e.jsxs("div",{className:"w-box flex gap-1 justify-center items-center",children:[e.jsx(E,{}),e.jsxs("small",{className:"text-gray-400",children:[s.registered," registered"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 sm:mt-0",children:[e.jsx("span",{className:"text-white text-sm font-medium rounded-2xl bg-green-500 px-2 py-1",children:"scheduled"}),e.jsx("div",{className:"icon-box p-2 cursor-pointer hover:text-white rounded-2xl hover:bg-green-700 bg-gray-200 border border-gray-500",children:e.jsx(Q,{className:"cursor-pointer text-2xl"})})]})]})},t)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-medium mb-5",children:"Course Performance"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:H.filter(s=>s.status=="published").map((s,t)=>e.jsxs("div",{className:"rounded-xl overflow-hidden border border-gray-100 shadow-sm",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4 w-full flex flex-col gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.title}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"top flex justify-between",children:[e.jsxs("div",{className:"t-left",children:[e.jsx("small",{className:"text-gray-400",children:"students"}),e.jsx("p",{children:s.students})]}),e.jsxs("div",{className:"t-right",children:[e.jsx("small",{className:"text-gray-400",children:"students"}),e.jsxs("p",{children:["‚≠ê",s.rating]})]})]}),e.jsxs("div",{className:"bottom flex justify-between",children:[e.jsxs("div",{className:"t-left",children:[e.jsx("small",{className:"text-gray-400",children:"Completion"}),e.jsx("p",{children:s.rating})]}),e.jsxs("div",{className:"t-right",children:[e.jsx("small",{className:"text-gray-400",children:"Status"}),e.jsx("p",{className:"text-[10px] bg-gray-400 p-1 rounded-2xl",children:s.status})]})]})]})]})]},t))})]})]})]})]})})}export{We as default};
