import{r as x,j as e}from"./index-BAzVzJec.js";import{I as C}from"./index-C8oNkhjH.js";import{L as u}from"./index-BuVtVerl.js";import{b as E}from"./index-HLd47iGM.js";import{h as S}from"./index-UcFw3JkJ.js";import{B as k}from"./BackDashboard-IguRWa86.js";import"./iconBase-CAFTq8Rg.js";import"./index-DaWSInqW.js";const h={getProgressStats:async()=>{try{const r=await fetch("/api/progress/stats",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Failed to fetch progress stats");return await r.json()}catch(r){throw console.error("Error fetching progress stats:",r),r}},getCourseProgress:async()=>{try{const r=await fetch("/api/progress/courses",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Failed to fetch course progress");return await r.json()}catch(r){throw console.error("Error fetching course progress:",r),r}},getActivityData:async r=>{try{const a=await fetch(`/api/progress/activity?week=${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw new Error("Failed to fetch activity data");return await a.json()}catch(a){throw console.error("Error fetching activity data:",a),a}},getAchievements:async()=>{try{const r=await fetch("/api/progress/achievements",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Failed to fetch achievements");return await r.json()}catch(r){throw console.error("Error fetching achievements:",r),r}},getGrades:async()=>{try{const r=await fetch("/api/progress/grades",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Failed to fetch grades");return await r.json()}catch(r){throw console.error("Error fetching grades:",r),r}},updateCourseProgress:async(r,a)=>{try{const i=await fetch(`/api/progress/courses/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(a)});if(!i.ok)throw new Error("Failed to update course progress");return await i.json()}catch(i){throw console.error("Error updating course progress:",i),i}}},b=[{id:1,title:"Overall Progress",icon:e.jsx(C,{}),number:"68%",content:e.jsx("div",{className:"w-[95%] h-3 bg-gray-300 rounded-full overflow-hidden shadow-sm",children:e.jsx("div",{className:"w-[40%] bg-blue-500 h-3 rounded-full"})})},{id:2,title:"Total Learning Time",icon:e.jsx(u,{}),number:"85h",content:"Across all courses"},{id:3,title:"Average Grade",icon:e.jsx(E,{}),number:"91%",content:"Excellent performance!"},{id:4,title:"Achievements",icon:e.jsx(S,{}),number:2,content:"Out of 4 available"}],P=["CourseProgress","Activity","Achievements","Grades"],G=({percentage:r,className:a=""})=>e.jsx("div",{className:`h-2.5 bg-blue-100 rounded-full ${a}`,children:e.jsx("div",{className:"h-2.5 bg-blue-500 rounded-full transition-all duration-500",style:{width:r}})}),g=({message:r,onRetry:a})=>e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-500 text-lg mb-4",children:r}),a&&e.jsx("button",{onClick:a,className:"bg-blue-500 text-white px-6 py-2 rounded-full hover:bg-blue-600 transition",children:"Try Again"})]}),$=({title:r,icon:a,number:i,content:l,loading:c})=>e.jsxs("div",{className:"border border-gray-200 shadow-md bg-white p-5 rounded-xl h-40 hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-lg font-medium",children:r}),e.jsx("span",{className:"text-2xl text-blue-600",children:a})]}),c?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl py-3 font-semibold",children:i}),e.jsx("div",{className:"text-sm text-gray-500",children:l})]})]}),v=({course:r,loading:a})=>a?e.jsxs("div",{className:"bg-white border-2 border-gray-300 w-full rounded-3xl p-5 mt-5 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx("div",{className:"h-20 w-20 rounded-xl bg-gray-200"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})]}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-full w-24"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[...Array(4)].map((i,l)=>e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-12"})]},l))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8"})]}),e.jsx("div",{className:"h-2.5 bg-gray-200 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mt-2"})]})]}):e.jsxs("div",{className:"bg-white border-2 border-gray-300 w-full rounded-3xl p-5 mt-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx("img",{className:"h-20 w-20 rounded-xl object-cover",src:r.img,alt:r.title}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-lg",children:r.title}),e.jsx("p",{className:"text-gray-500",children:r.instructor})]})]}),e.jsxs("button",{className:"flex gap-1 bg-blue-50 rounded-full h-8 px-3 items-center text-gray-700",children:[e.jsx("span",{className:"font-medium",children:r.completion}),e.jsx("span",{children:"complete"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Lessons"}),e.jsx("p",{className:"font-medium",children:r.lessons})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Time Spent"}),e.jsx("p",{className:"font-medium",children:r.timeSpent})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Current Grade"}),e.jsx("p",{className:"font-medium",children:r.currentGrade})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Last Activity"}),e.jsx("p",{className:"font-medium",children:r.lastActivity})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:"Progress"}),e.jsx("p",{className:"font-medium",children:r.progress})]}),e.jsx(G,{percentage:r.progress}),e.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["Currently learning: ",e.jsx("span",{className:"font-medium",children:r.currentlyLearning})]})]})]}),B=({data:r,loading:a,error:i,onRetry:l})=>{if(a)return e.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-white rounded-2xl shadow-sm p-6 border border-gray-100 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})]}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-full w-32"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-4",children:[...Array(7)].map((n,d)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-20 bg-gray-200 rounded-2xl"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 mt-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-12 mt-1"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 mt-1"})]},d))})]});if(i)return e.jsx(g,{message:i,onRetry:l});const c=r.reduce((n,d)=>n+d.lessons,0),o=r.reduce((n,d)=>n+d.hours,0),m=Math.max(...r.map(n=>n.hours));return e.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-white rounded-2xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Weekly Activity"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Your learning activity for this week"})]}),e.jsxs("div",{className:"bg-blue-50 text-blue-600 text-sm px-4 py-2 rounded-full font-medium",children:[c," lessons completed"]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-gray-700 font-medium",children:"This Week"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[o.toFixed(1)," hours total"]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-4",children:r.map((n,d)=>e.jsxs("div",{className:"flex flex-col items-center justify-end text-center",children:[e.jsx("div",{className:"relative w-full h-20 rounded-2xl bg-blue-100 flex items-end justify-center",children:e.jsx("div",{className:"bg-blue-600 w-full rounded-2xl transition-all duration-500",style:{height:`${n.hours/m*100}%`}})}),e.jsxs("div",{className:"mt-2 text-gray-700 text-sm font-medium",children:[n.hours,"h"]}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[n.lessons," lessons"]}),e.jsx("div",{className:"text-gray-600 text-sm font-semibold mt-1",children:n.day})]},d))})]})},N=({achievement:r,loading:a})=>a?e.jsxs("div",{className:"flex gap-4 p-5 rounded-xl border-2 bg-gray-100 border-gray-300 animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-300"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-32"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-48"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded-full w-32"})]})]}):e.jsxs("div",{className:`flex gap-4 p-5 rounded-xl border-2 ${r.earned?"bg-blue-100 border-blue-300":"bg-gray-100 border-gray-300"}`,children:[e.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center text-white text-2xl ${r.earned?"bg-blue-500":"bg-gray-400"}`,children:r.logo}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"flex gap-2 items-center text-lg font-semibold",children:[r.title,r.earned&&e.jsx(u,{className:"text-blue-600 text-xl"})]}),e.jsx("p",{className:"text-gray-500 mt-1",children:r.subTitle}),e.jsx("button",{className:`mt-2 px-4 py-1 rounded-full text-sm font-medium ${r.earned?"bg-blue-500 text-white":"bg-gray-300 text-gray-600"}`,children:r.buttonText})]})]}),w=({grade:r,loading:a})=>{if(a)return e.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-gray-300 rounded-2xl animate-pulse",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-24"})]})]});const l=(c=>c>=90?{text:"excellent",class:"bg-green-500 text-white"}:c>=80?{text:"good",class:"bg-blue-500 text-white"}:c>=70?{text:"average",class:"bg-amber-400 text-white"}:{text:"needs improvement",class:"bg-red-500 text-white"})(r.score);return e.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-gray-300 rounded-2xl hover:border-blue-300 transition",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.title}),e.jsx("p",{className:"text-gray-500 text-sm",children:r.course}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:r.date})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("h1",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:r.score}),e.jsxs("span",{className:"text-gray-500",children:["/ ",r.total]}),e.jsx(u,{className:"text-green-600 text-xl"})]}),e.jsx("button",{className:`px-3 py-1 rounded-full text-xs font-medium ${l.class}`,children:l.text})]})})]})};function M(){const[r,a]=x.useState("CourseProgress"),[i,l]=x.useState({stats:!0,courses:!0,activity:!0,achievements:!0,grades:!0}),[c,o]=x.useState({stats:null,courses:null,activity:null,achievements:null,grades:null}),[m,n]=x.useState({stats:b,courses:[],activity:[],achievements:[],grades:[]});x.useEffect(()=>{d()},[]);const d=async()=>{try{await Promise.all([A(),j(),y(),p(),f()])}catch(s){console.error("Error fetching all data:",s)}},A=async()=>{l(s=>({...s,stats:!0})),o(s=>({...s,stats:null}));try{const s=await h.getProgressStats();n(t=>({...t,stats:s}))}catch(s){o(t=>({...t,stats:s.message})),n(t=>({...t,stats:b}))}finally{l(s=>({...s,stats:!1}))}},j=async()=>{l(s=>({...s,courses:!0})),o(s=>({...s,courses:null}));try{const s=await h.getCourseProgress();n(t=>({...t,courses:s}))}catch(s){o(t=>({...t,courses:s.message}))}finally{l(s=>({...s,courses:!1}))}},y=async()=>{l(s=>({...s,activity:!0})),o(s=>({...s,activity:null}));try{const s=await h.getActivityData("current");n(t=>({...t,activity:s}))}catch(s){o(t=>({...t,activity:s.message}))}finally{l(s=>({...s,activity:!1}))}},p=async()=>{l(s=>({...s,achievements:!0})),o(s=>({...s,achievements:null}));try{const s=await h.getAchievements();n(t=>({...t,achievements:s}))}catch(s){o(t=>({...t,achievements:s.message}))}finally{l(s=>({...s,achievements:!1}))}},f=async()=>{l(s=>({...s,grades:!0})),o(s=>({...s,grades:null}));try{const s=await h.getGrades();n(t=>({...t,grades:s}))}catch(s){o(t=>({...t,grades:s.message}))}finally{l(s=>({...s,grades:!1}))}},T=()=>{switch(r){case"CourseProgress":return e.jsx("div",{className:"space-y-5",children:i.courses?[...Array(2)].map((s,t)=>e.jsx(v,{loading:!0},t)):c.courses?e.jsx(g,{message:c.courses,onRetry:j}):m.courses.map(s=>e.jsx(v,{course:s},s.id))});case"Activity":return e.jsx(B,{data:m.activity,loading:i.activity,error:c.activity,onRetry:y});case"Achievements":return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:i.achievements?[...Array(4)].map((s,t)=>e.jsx(N,{loading:!0},t)):c.achievements?e.jsx(g,{message:c.achievements,onRetry:p}):m.achievements.map(s=>e.jsx(N,{achievement:s},s.id))});case"Grades":return e.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-6",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-1",children:"Quiz & Assessment Results"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Your recent quiz scores and assessments"}),e.jsx("div",{className:"space-y-4",children:i.grades?[...Array(3)].map((s,t)=>e.jsx(w,{loading:!0},t)):c.grades?e.jsx(g,{message:c.grades,onRetry:f}):m.grades.map(s=>e.jsx(w,{grade:s},s.id))})]});default:return null}};return e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsx(k,{}),e.jsxs("div",{className:"mt-8 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Learning Progress"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Track your learning journey and celebrate your achievements."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-8",children:m.stats.map(s=>e.jsx($,{...s,loading:i.stats},s.id))}),e.jsx("div",{className:"flex overflow-x-auto mt-10 bg-gray-200 rounded-full p-1",children:P.map(s=>e.jsx("button",{onClick:()=>a(s),className:`flex-1 whitespace-nowrap rounded-full px-4 py-2 font-medium transition-all ${r===s?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:s},s))}),e.jsx("div",{className:"mt-6",children:T()})]})}export{M as default};
